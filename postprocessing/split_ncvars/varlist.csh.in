#!/bin/tcsh -f
#
# ------------------------------------------------------------------------------
# FMS/FRE Project: Script to Print Info About netCDF Variables
# ------------------------------------------------------------------------------
# Copyright (C) NOAA Geophysical Fluid Dynamics Laboratory, 2000-2010, 2024
# Designed and written by V. Balaji, Amy Langenhorst and Aleksey Yakovlev
#

set file = $1

##################################################################

alias list_ncvars.csh `which list_ncvars.csh`

##################################################################

if (-e .tmpdump) then
   echo ERROR: File .tmpdump exists.
   exit 1
endif

@NCDUMP@ -h $file > .tmpdump
set vars = `list_ncvars.csh -t0123 $file`

foreach var ($vars)
    #   --- get the long name and units ---
    set string = `grep "	${var}:long_name" .tmpdump`
    set name = `echo $string[3-] | sed -e 's/"/ /g' | sed -e 's/;/ /g'`
    set string = `grep "	${var}:units" .tmpdump`
    set units = `echo $string[3-] | sed -e 's/"/ /g' | sed -e 's/;/ /g'`
    echo $var.nc $name "("$units")" | awk '{printf "%20s = ", $1}{for (i = 2; i < NF; ++i) printf "%s ", $i}{printf "%s\n", $NF}'
end

if (-e .tmpdump) rm -f .tmpdump
